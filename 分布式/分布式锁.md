## 什么是分布式锁
类比多线程访问共享资源，会发生数据竞争，为避免这种情况导致意外的结果，会有`synchronized`等悲观锁来确保线程安全。
分布式环境下，为确保多个JVM进程线程安全的访问共享资源，分布式锁应运而生。

![分布式锁](https://oss.javaguide.cn/github/javaguide/distributed-system/distributed-lock/distributed-lock.png)

## 分布式锁应该具备的条件
- **互斥**：任意一个时刻，锁只能被一个线程持有。
- **高可用**：锁服务是高可用的，当一个锁服务出现问题，能够自动切换到另外一个锁服务。并且，即使客户端的释放锁的代码逻辑出现问题，锁最终一定还是会被释放，不会影响其他线程对共享资源的访问。这一般是通过超时机制实现的。
- **可重入**：一个节点获取了锁之后，还可以再次获取锁。
除了上面这三个基本条件之外，一个好的分布式锁还需要满足下面这些条件：
- **高性能**：获取和释放锁的操作应该快速完成，并且不应该对整个系统的性能造成过大影响。
- **非阻塞**：如果获取不到锁，不能无限期等待，避免对系统正常运行造成影响。
## 分布式锁实现方式
- 基于MySQL
- 基于ZK[[ZK分布式锁实现方案]]
- 基于Redis[[Redis分布式锁实现方案]]